angular.module("dndLists",[]).directive("dndDraggable",["$parse","$timeout","dndDropEffectWorkaround","dndDragTypeWorkaround",function(a,b,c,d){return function(e,f,g){f.attr("draggable","true"),g.dndDisableIf&&e.$watch(g.dndDisableIf,function(a){f.attr("draggable",!a)}),f.on("dragstart",function(a){a=a.originalEvent||a,a.dataTransfer.setData("Text",angular.toJson(e.$eval(g.dndDraggable))),a.dataTransfer.effectAllowed=g.dndEffectAllowed||"move",f.addClass("dndDragging"),b(function(){f.addClass("dndDraggingSource")},0),c.dropEffect="none",d.isDragging=!0,d.dragType=g.dndType?e.$eval(g.dndType):void 0,a.stopPropagation()}),f.on("dragend",function(b){b=b.originalEvent||b;var h="none"!==b.dataTransfer.dropEffect?b.dataTransfer.dropEffect:c.dropEffect;e.$apply(function(){switch(h){case"move":a(g.dndMoved)(e);break;case"copy":a(g.dndCopied)(e)}}),f.removeClass("dndDragging"),f.removeClass("dndDraggingSource"),d.isDragging=!1,b.stopPropagation()}),f.on("click",function(b){b=b.originalEvent||b,e.$apply(function(){a(g.dndSelected)(e)}),b.stopPropagation()}),f.on("selectstart",function(){return this.dragDrop&&this.dragDrop(),!1})}}]).directive("dndList",["$timeout","dndDropEffectWorkaround","dndDragTypeWorkaround",function(a,b,c){return function(d,e,f){function g(a){if(!a)return!0;for(var b=0;b<a.length;b++)if("Text"===a[b]||"text/plain"===a[b])return!0;return!1}var h=angular.element("<li class='dndPlaceholder'></li>"),i=h[0],j=e[0];e.on("dragover",function(a){if(a=a.originalEvent||a,!c.isDragging)return!0;if(!g(a.dataTransfer.types))return!0;if(f.dndAllowedTypes){var b=d.$eval(f.dndAllowedTypes);if(angular.isArray(b)&&-1===b.indexOf(c.dragType))return!0}if(f.dndDisableIf&&d.$eval(f.dndDisableIf))return!0;if(i.parentNode!=j&&e.append(h),a.target.parentNode===j&&a.target!==i){var k=(a.offsetY||a.layerY)<a.target.offsetHeight/2;j.insertBefore(i,k?a.target:a.target.nextSibling)}else if(a.target===j)if(a.offsetY<i.offsetTop)for(;i.previousElementSibling&&(0===i.previousElementSibling.offsetHeight||a.offsetY<i.previousElementSibling.offsetTop+i.previousElementSibling.offsetHeight/2);)j.insertBefore(i,i.previousElementSibling);else for(;i.nextElementSibling&&a.offsetY>i.nextElementSibling.offsetTop+i.nextElementSibling.offsetHeight/2;)j.insertBefore(i,i.nextElementSibling.nextElementSibling);return e.addClass("dndDragover"),a.preventDefault(),a.stopPropagation(),!1}),e.on("drop",function(a){if(a=a.originalEvent||a,!c.isDragging)return!0;if(!g(a.dataTransfer.types))return!0;if(f.dndAllowedTypes){var k=d.$eval(f.dndAllowedTypes);if(angular.isArray(k)&&-1===k.indexOf(c.dragType))return!0}if(f.dndDisableIf&&d.$eval(f.dndDisableIf))return!0;var l=JSON.parse(a.dataTransfer.getData("Text")||a.dataTransfer.getData("text/plain")),m=d.$eval(f.dndList),n=Array.prototype.indexOf.call(j.children,i);return d.$apply(function(){m.splice(n,0,l)}),"none"===a.dataTransfer.dropEffect&&(b.dropEffect="copyMove"===a.dataTransfer.effectAllowed?a.ctrlKey?"copy":"move":a.dataTransfer.effectAllowed),h.remove(),e.removeClass("dndDragover"),a.preventDefault(),a.stopPropagation(),!1}),e.on("dragleave",function(b){b=b.originalEvent||b,e.removeClass("dndDragover"),a(function(){e.hasClass("dndDragover")||h.remove()},100)})}}]).factory("dndDragTypeWorkaround",function(){return{}}).factory("dndDropEffectWorkaround",function(){return{}});
//# sourceMappingURL=angular-drag-and-drop-lists.min.map